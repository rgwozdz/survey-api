<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{
  &quot;stats&quot;: {
    &quot;suites&quot;: 12,
    &quot;tests&quot;: 14,
    &quot;passes&quot;: 14,
    &quot;pending&quot;: 0,
    &quot;failures&quot;: 0,
    &quot;start&quot;: &quot;2018-01-07T22:54:00.894Z&quot;,
    &quot;end&quot;: &quot;2018-01-07T22:54:01.148Z&quot;,
    &quot;duration&quot;: 254,
    &quot;testsRegistered&quot;: 14,
    &quot;passPercent&quot;: 100,
    &quot;pendingPercent&quot;: 0,
    &quot;other&quot;: 0,
    &quot;hasOther&quot;: false,
    &quot;skipped&quot;: 0,
    &quot;hasSkipped&quot;: false,
    &quot;passPercentClass&quot;: &quot;success&quot;,
    &quot;pendingPercentClass&quot;: &quot;danger&quot;
  },
  &quot;suites&quot;: {
    &quot;title&quot;: &quot;&quot;,
    &quot;suites&quot;: [
      {
        &quot;title&quot;: &quot;AnswerValidation tests&quot;,
        &quot;suites&quot;: [
          {
            &quot;title&quot;: &quot;Test answerValidation&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;Requests without \&quot;answer\&quot; parameter should return 400 error&quot;,
                &quot;fullTitle&quot;: &quot;AnswerValidation tests Test answerValidation Requests without \&quot;answer\&quot; parameter should return 400 error&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 1,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;128735e1-0bb6-468a-826b-673f3a6e5134&quot;,
                &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Requests with multiple \&quot;answer\&quot; parameters as array should return 400 error&quot;,
                &quot;fullTitle&quot;: &quot;AnswerValidation tests Test answerValidation Requests with multiple \&quot;answer\&quot; parameters as array should return 400 error&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = [&#x27;bagels&#x27;, &#x27;donuts&#x27;];\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;cc1e7afe-4a09-4b61-afd0-6f03178cb865&quot;,
                &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Requests with invalid answers should return 400 error&quot;,
                &quot;fullTitle&quot;: &quot;AnswerValidation tests Test answerValidation Requests with invalid answers should return 400 error&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 1,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = &#x27;goldfish&#x27;;\nmock.req.session.questions = questions;\nmock.req.session.questionIndex = 2;\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;fcdf93ed-6bf0-4f33-a9a6-2b7584cbf7fd&quot;,
                &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Requests with matched should continue&quot;,
                &quot;fullTitle&quot;: &quot;AnswerValidation tests Test answerValidation Requests with matched should continue&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = &#x27;dogs&#x27;;\nmock.req.session.questions = questions;\nmock.req.session.questionIndex = 2;\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError).to.equal(null);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;d8fb4c0c-c368-4843-a5f8-985e63b185af&quot;,
                &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/answer-validation-spec.js&quot;,
            &quot;uuid&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/usr/src/test/answer-validation-spec.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;Requests without \&quot;answer\&quot; parameter should return 400 error&quot;,
                &quot;fullTitle&quot;: &quot;AnswerValidation tests Test answerValidation Requests without \&quot;answer\&quot; parameter should return 400 error&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 1,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;128735e1-0bb6-468a-826b-673f3a6e5134&quot;,
                &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Requests with multiple \&quot;answer\&quot; parameters as array should return 400 error&quot;,
                &quot;fullTitle&quot;: &quot;AnswerValidation tests Test answerValidation Requests with multiple \&quot;answer\&quot; parameters as array should return 400 error&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = [&#x27;bagels&#x27;, &#x27;donuts&#x27;];\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;cc1e7afe-4a09-4b61-afd0-6f03178cb865&quot;,
                &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Requests with invalid answers should return 400 error&quot;,
                &quot;fullTitle&quot;: &quot;AnswerValidation tests Test answerValidation Requests with invalid answers should return 400 error&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 1,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = &#x27;goldfish&#x27;;\nmock.req.session.questions = questions;\nmock.req.session.questionIndex = 2;\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;fcdf93ed-6bf0-4f33-a9a6-2b7584cbf7fd&quot;,
                &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Requests with matched should continue&quot;,
                &quot;fullTitle&quot;: &quot;AnswerValidation tests Test answerValidation Requests with matched should continue&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = &#x27;dogs&#x27;;\nmock.req.session.questions = questions;\nmock.req.session.questionIndex = 2;\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError).to.equal(null);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;d8fb4c0c-c368-4843-a5f8-985e63b185af&quot;,
                &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 4,
            &quot;totalPasses&quot;: 4,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 2,
            &quot;rootEmpty&quot;: false
          }
        ],
        &quot;tests&quot;: [],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/answer-validation-spec.js&quot;,
        &quot;uuid&quot;: &quot;d2bcb1ad-3c3e-4804-a8f9-603d1eb4154f&quot;,
        &quot;beforeHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;before all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;AnswerValidation tests \&quot;before all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 76,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;mongoose.connect(`mongodb://mongo-store/test_answer_validation`);\ndb = mongoose.connection;\ndb.on(&#x27;error&#x27;, console.error.bind(console, &#x27;connection error&#x27;));\ndb.once(&#x27;open&#x27;, function() {\n  createDatabase(db)\n    .then(result=&gt;{\n      return getQuestions(db);\n    })\n    .then(result=&gt;{\n      questions = result;\n      done();\n    })\n    .catch(err=&gt;{\n      console.error(err);\n      done();\n      throw err;\n    });\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;8193a74a-96bd-4a15-9e7e-a0a64613585f&quot;,
            &quot;parentUUID&quot;: &quot;d2bcb1ad-3c3e-4804-a8f9-603d1eb4154f&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;afterHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;after all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;AnswerValidation tests \&quot;after all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 4,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;db.dropDatabase(function(){\n  mongoose.connection.close(done);\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;73156aee-b7d0-4cba-8f9f-dc19931e7b09&quot;,
            &quot;parentUUID&quot;: &quot;d2bcb1ad-3c3e-4804-a8f9-603d1eb4154f&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;fullFile&quot;: &quot;/usr/src/test/answer-validation-spec.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: true,
        &quot;hasAfterHooks&quot;: true,
        &quot;hasTests&quot;: false,
        &quot;hasSuites&quot;: true,
        &quot;totalTests&quot;: 0,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;CreateSummary tests&quot;,
        &quot;suites&quot;: [
          {
            &quot;title&quot;: &quot;Test createSummary&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;Should return an summary object array with right properties even though no req.session.questions&quot;,
                &quot;fullTitle&quot;: &quot;CreateSummary tests Test createSummary Should return an summary object array with right properties even though no req.session.questions&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 4,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\nreturn createSummary(mock.req)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;response&#x27;).that.is.an(&#x27;string&#x27;);\n    })\n  });&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;b249cd77-c298-442a-a397-a76d90363057&quot;,
                &quot;parentUUID&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Should return an summary object array with right properties given there is a req.session.questions&quot;,
                &quot;fullTitle&quot;: &quot;CreateSummary tests Test createSummary Should return an summary object array with right properties given there is a req.session.questions&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\n mock.req.session.questions = questions;\nreturn createSummary(mock.req)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;response&#x27;).that.is.a(&#x27;string&#x27;);\n    })\n  });&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;bfc02a7f-c742-4af4-8bcd-608b8562e5b5&quot;,
                &quot;parentUUID&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/create-summary-spec.js&quot;,
            &quot;uuid&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/usr/src/test/create-summary-spec.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;Should return an summary object array with right properties even though no req.session.questions&quot;,
                &quot;fullTitle&quot;: &quot;CreateSummary tests Test createSummary Should return an summary object array with right properties even though no req.session.questions&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 4,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\nreturn createSummary(mock.req)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;response&#x27;).that.is.an(&#x27;string&#x27;);\n    })\n  });&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;b249cd77-c298-442a-a397-a76d90363057&quot;,
                &quot;parentUUID&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Should return an summary object array with right properties given there is a req.session.questions&quot;,
                &quot;fullTitle&quot;: &quot;CreateSummary tests Test createSummary Should return an summary object array with right properties given there is a req.session.questions&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\n mock.req.session.questions = questions;\nreturn createSummary(mock.req)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;response&#x27;).that.is.a(&#x27;string&#x27;);\n    })\n  });&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;bfc02a7f-c742-4af4-8bcd-608b8562e5b5&quot;,
                &quot;parentUUID&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 2,
            &quot;totalPasses&quot;: 2,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 6,
            &quot;rootEmpty&quot;: false
          }
        ],
        &quot;tests&quot;: [],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/create-summary-spec.js&quot;,
        &quot;uuid&quot;: &quot;eda1a3d1-29eb-4f06-8f44-b4bf416a1d9a&quot;,
        &quot;beforeHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;before all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;CreateSummary tests \&quot;before all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 16,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;mongoose.connect(`mongodb://mongo-store/test_next_redirects`);\ndb = mongoose.connection;\ndb.on(&#x27;error&#x27;, console.error.bind(console, &#x27;connection error&#x27;));\ndb.once(&#x27;open&#x27;, function() {\n  createDatabase(db)\n    .then(result=&gt;{\n      return getQuestions(db);\n    })\n    .then(result=&gt;{\n      questions = result;\n      done();\n    })\n    .catch(err=&gt;{\n      console.error(err);\n      done();\n      throw err;\n    });\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;35217a82-690a-4b5a-a341-c997c1864c00&quot;,
            &quot;parentUUID&quot;: &quot;eda1a3d1-29eb-4f06-8f44-b4bf416a1d9a&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;afterHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;after all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;CreateSummary tests \&quot;after all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;db.dropDatabase(function(){\n  mongoose.connection.close(done);\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;f18187b8-0210-418e-a9eb-82827104c966&quot;,
            &quot;parentUUID&quot;: &quot;eda1a3d1-29eb-4f06-8f44-b4bf416a1d9a&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;fullFile&quot;: &quot;/usr/src/test/create-summary-spec.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: true,
        &quot;hasAfterHooks&quot;: true,
        &quot;hasTests&quot;: false,
        &quot;hasSuites&quot;: true,
        &quot;totalTests&quot;: 0,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;End 2 end tests&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;GET /api/v1/start&quot;,
            &quot;fullTitle&quot;: &quot;End 2 end tests GET /api/v1/start&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 45,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;medium&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;let cookie;\n    testRequest(app)\n      .get(&#x27;/api/v1/start&#x27;)\n      .then(res=&gt;{\n        // Test that the endpoint exists and responds with specified data\n        expect(res).to.have.property(&#x27;status&#x27;, 200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Coffee or tea?\&quot;);\n        expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n        cookie = res.header[&#x27;set-cookie&#x27;][0].split(&#x27;; &#x27;)[0];\n        return testRequest(app).get(&#x27;/api/v1/next?answer=tea&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      })\n      .then(res=&gt;{\n        // Test that the endpoint exists and responds with specified data\n        //console.log(res);\n        expect(res).to.have.property(&#x27;status&#x27;, 200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Donuts or bagels?\&quot;);\n        expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n        done();//return testRequest(app).get(&#x27;/api/v1/next?answer=bagels&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 200);\n      //   expect(res.body).to.be.an(&#x27;object&#x27;);\n      //   expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Cats or dogs?\&quot;);\n      //   expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n      //\n      //   return testRequest(app).get(&#x27;/api/v1/next?answer=dogs&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      // })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 302);\n      //   expect(res.header.location).to.equal(&#x27;/api/v1/summary&#x27;);\n      //\n      //   done();//return testRequest(app).get(&#x27;/api/v1/summary&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      // })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 200);\n      //   // res.body.forEach(item=&gt;{\n      //   //   expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      //   //   expect(item).to.have.property(&#x27;response&#x27;).that.is.a(&#x27;string&#x27;);\n      //   // })\n      //   done();\n      // })\n      .catch(err=&gt;{\n        console.error(err);\n        expect(err === undefined).to.equal(true);\n        done();\n      });&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;87997fce-e902-426e-b9b0-2a6a11b4de96&quot;,
            &quot;parentUUID&quot;: &quot;7330f2a8-5773-4e1e-865b-436da2a34842&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/end-2-end-spec.js&quot;,
        &quot;uuid&quot;: &quot;7330f2a8-5773-4e1e-865b-436da2a34842&quot;,
        &quot;beforeHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;before all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;End 2 end tests \&quot;before all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 39,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;mongoose.connect(`mongodb://mongo-store/test_get_questions`);\ndb = mongoose.connection;\ndb.on(&#x27;error&#x27;, console.error.bind(console, &#x27;connection error&#x27;));\ndb.once(&#x27;open&#x27;, function() {\n  createDatabase(db)\n    .then(result=&gt;{\n      // Get the express app\n      return appPromise();\n    })\n    .then((promisedApp) =&gt; {\n      app = promisedApp;\n      app.set(&#x27;db&#x27;, db);\n      done();\n    })\n    .catch(err=&gt;{\n      console.error(err);\n      done();\n      throw err;\n    });\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;83723fcd-c23d-40bd-ad70-12082350562c&quot;,
            &quot;parentUUID&quot;: &quot;7330f2a8-5773-4e1e-865b-436da2a34842&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;afterHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;after all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;End 2 end tests \&quot;after all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;db.dropDatabase(function(){\n  mongoose.connection.close(done);\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;8cd1b4b6-a147-4595-aa3f-4df75a97f499&quot;,
            &quot;parentUUID&quot;: &quot;7330f2a8-5773-4e1e-865b-436da2a34842&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;fullFile&quot;: &quot;/usr/src/test/end-2-end-spec.js&quot;,
        &quot;passes&quot;: [
          {
            &quot;title&quot;: &quot;GET /api/v1/start&quot;,
            &quot;fullTitle&quot;: &quot;End 2 end tests GET /api/v1/start&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 45,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;medium&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;let cookie;\n    testRequest(app)\n      .get(&#x27;/api/v1/start&#x27;)\n      .then(res=&gt;{\n        // Test that the endpoint exists and responds with specified data\n        expect(res).to.have.property(&#x27;status&#x27;, 200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Coffee or tea?\&quot;);\n        expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n        cookie = res.header[&#x27;set-cookie&#x27;][0].split(&#x27;; &#x27;)[0];\n        return testRequest(app).get(&#x27;/api/v1/next?answer=tea&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      })\n      .then(res=&gt;{\n        // Test that the endpoint exists and responds with specified data\n        //console.log(res);\n        expect(res).to.have.property(&#x27;status&#x27;, 200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Donuts or bagels?\&quot;);\n        expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n        done();//return testRequest(app).get(&#x27;/api/v1/next?answer=bagels&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 200);\n      //   expect(res.body).to.be.an(&#x27;object&#x27;);\n      //   expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Cats or dogs?\&quot;);\n      //   expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n      //\n      //   return testRequest(app).get(&#x27;/api/v1/next?answer=dogs&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      // })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 302);\n      //   expect(res.header.location).to.equal(&#x27;/api/v1/summary&#x27;);\n      //\n      //   done();//return testRequest(app).get(&#x27;/api/v1/summary&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      // })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 200);\n      //   // res.body.forEach(item=&gt;{\n      //   //   expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      //   //   expect(item).to.have.property(&#x27;response&#x27;).that.is.a(&#x27;string&#x27;);\n      //   // })\n      //   done();\n      // })\n      .catch(err=&gt;{\n        console.error(err);\n        expect(err === undefined).to.equal(true);\n        done();\n      });&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;87997fce-e902-426e-b9b0-2a6a11b4de96&quot;,
            &quot;parentUUID&quot;: &quot;7330f2a8-5773-4e1e-865b-436da2a34842&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: true,
        &quot;hasAfterHooks&quot;: true,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 1,
        &quot;totalPasses&quot;: 1,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: true,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 45,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;GetQuestions tests&quot;,
        &quot;suites&quot;: [
          {
            &quot;title&quot;: &quot;Test getQuestions&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;Should return an object array with right properties &quot;,
                &quot;fullTitle&quot;: &quot;GetQuestions tests Test getQuestions Should return an object array with right properties &quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;return getQuestions(db)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;label&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n    })\n  });&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;f0c9cb9d-6cf7-432e-8d7b-2f2c6de05ff1&quot;,
                &quot;parentUUID&quot;: &quot;e8d28578-8f4e-4c55-9c8f-579278bae823&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/get-questions-spec.js&quot;,
            &quot;uuid&quot;: &quot;e8d28578-8f4e-4c55-9c8f-579278bae823&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/usr/src/test/get-questions-spec.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;Should return an object array with right properties &quot;,
                &quot;fullTitle&quot;: &quot;GetQuestions tests Test getQuestions Should return an object array with right properties &quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;return getQuestions(db)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;label&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n    })\n  });&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;f0c9cb9d-6cf7-432e-8d7b-2f2c6de05ff1&quot;,
                &quot;parentUUID&quot;: &quot;e8d28578-8f4e-4c55-9c8f-579278bae823&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 1,
            &quot;totalPasses&quot;: 1,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 3,
            &quot;rootEmpty&quot;: false
          }
        ],
        &quot;tests&quot;: [],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/get-questions-spec.js&quot;,
        &quot;uuid&quot;: &quot;229b09f8-273c-4663-adee-e520d03d7008&quot;,
        &quot;beforeHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;before all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;GetQuestions tests \&quot;before all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 13,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;mongoose.connect(`mongodb://mongo-store/test_get_questions`);\ndb = mongoose.connection;\ndb.on(&#x27;error&#x27;, console.error.bind(console, &#x27;connection error&#x27;));\ndb.once(&#x27;open&#x27;, function() {\n  createDatabase(db)\n    .then(result=&gt;{\n      done();\n    })\n    .catch(err=&gt;{\n      console.error(err);\n      done();\n      throw err;\n    });\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;736622cf-32bc-4891-91a6-cecfc80ec705&quot;,
            &quot;parentUUID&quot;: &quot;229b09f8-273c-4663-adee-e520d03d7008&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;afterHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;after all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;GetQuestions tests \&quot;after all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;db.dropDatabase(function(){\n  mongoose.connection.close(done);\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;9f1fd477-7127-429a-85f1-9de1ddb2da02&quot;,
            &quot;parentUUID&quot;: &quot;229b09f8-273c-4663-adee-e520d03d7008&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;fullFile&quot;: &quot;/usr/src/test/get-questions-spec.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: true,
        &quot;hasAfterHooks&quot;: true,
        &quot;hasTests&quot;: false,
        &quot;hasSuites&quot;: true,
        &quot;totalTests&quot;: 0,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;NextRedirects tests&quot;,
        &quot;suites&quot;: [
          {
            &quot;title&quot;: &quot;Test nextRedirects&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;Sessions with a question index of -1 should be sent to /api/v1/start&quot;,
                &quot;fullTitle&quot;: &quot;NextRedirects tests Test nextRedirects Sessions with a question index of -1 should be sent to /api/v1/start&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = -1;\nnextRedirects(mock.req, mock.res, mock.next);\nexpect(mock.redirectedPath).to.equal(&#x27;/api/v1/start&#x27;);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;73f1e697-25c2-4816-b4bf-b8bddf457dc4&quot;,
                &quot;parentUUID&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Sessions with a question index of &gt; total questions should be sent to /api/v1/summary&quot;,
                &quot;fullTitle&quot;: &quot;NextRedirects tests Test nextRedirects Sessions with a question index of &gt; total questions should be sent to /api/v1/summary&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = questions.length;\nmock.req.session.questions = questions;\nnextRedirects(mock.req, mock.res, mock.next);\nexpect(mock.redirectedPath).to.equal(&#x27;/api/v1/summary&#x27;);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;14e51446-8294-4ede-a654-365331087c46&quot;,
                &quot;parentUUID&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/next-redirects-spec.js&quot;,
            &quot;uuid&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/usr/src/test/next-redirects-spec.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;Sessions with a question index of -1 should be sent to /api/v1/start&quot;,
                &quot;fullTitle&quot;: &quot;NextRedirects tests Test nextRedirects Sessions with a question index of -1 should be sent to /api/v1/start&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = -1;\nnextRedirects(mock.req, mock.res, mock.next);\nexpect(mock.redirectedPath).to.equal(&#x27;/api/v1/start&#x27;);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;73f1e697-25c2-4816-b4bf-b8bddf457dc4&quot;,
                &quot;parentUUID&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Sessions with a question index of &gt; total questions should be sent to /api/v1/summary&quot;,
                &quot;fullTitle&quot;: &quot;NextRedirects tests Test nextRedirects Sessions with a question index of &gt; total questions should be sent to /api/v1/summary&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = questions.length;\nmock.req.session.questions = questions;\nnextRedirects(mock.req, mock.res, mock.next);\nexpect(mock.redirectedPath).to.equal(&#x27;/api/v1/summary&#x27;);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;14e51446-8294-4ede-a654-365331087c46&quot;,
                &quot;parentUUID&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 2,
            &quot;totalPasses&quot;: 2,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 0,
            &quot;rootEmpty&quot;: false
          }
        ],
        &quot;tests&quot;: [],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/next-redirects-spec.js&quot;,
        &quot;uuid&quot;: &quot;258dd24c-561b-4cf5-8a5c-a88806ce06a1&quot;,
        &quot;beforeHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;before all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;NextRedirects tests \&quot;before all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 11,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;mongoose.connect(`mongodb://mongo-store/test_next_redirects`);\ndb = mongoose.connection;\ndb.on(&#x27;error&#x27;, console.error.bind(console, &#x27;connection error&#x27;));\ndb.once(&#x27;open&#x27;, function() {\n  createDatabase(db)\n    .then(result=&gt;{\n      return getQuestions(db);\n    })\n    .then(result=&gt;{\n      questions = result;\n      done();\n    })\n    .catch(err=&gt;{\n      console.error(err);\n      done();\n      throw err;\n    });\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;9a0e781f-7e25-4c47-8f37-cc1ca9b4f244&quot;,
            &quot;parentUUID&quot;: &quot;258dd24c-561b-4cf5-8a5c-a88806ce06a1&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;afterHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;after all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;NextRedirects tests \&quot;after all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 2,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;db.dropDatabase(function(){\n  mongoose.connection.close(done);\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;3ef74a41-87d4-4113-b0d6-7cb30a7febc4&quot;,
            &quot;parentUUID&quot;: &quot;258dd24c-561b-4cf5-8a5c-a88806ce06a1&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;fullFile&quot;: &quot;/usr/src/test/next-redirects-spec.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: true,
        &quot;hasAfterHooks&quot;: true,
        &quot;hasTests&quot;: false,
        &quot;hasSuites&quot;: true,
        &quot;totalTests&quot;: 0,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;SessionUtils tests&quot;,
        &quot;suites&quot;: [
          {
            &quot;title&quot;: &quot;Test sessionQuestionIndex&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;Sessions not yet assigned a questionIndex should get one equal to -1&quot;,
                &quot;fullTitle&quot;: &quot;SessionUtils tests Test sessionQuestionIndex Sessions not yet assigned a questionIndex should get one equal to -1&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.req.session.questionIndex).to.equal(-1);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;9ccbca3a-695a-4882-a928-3b55d874bb7d&quot;,
                &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Sessions already assigned a questionIndex integer should keep it intact&quot;,
                &quot;fullTitle&quot;: &quot;SessionUtils tests Test sessionQuestionIndex Sessions already assigned a questionIndex integer should keep it intact&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = 1;\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.req.session.questionIndex).to.equal(1);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;a0f13c17-8de3-4d4f-93e6-4e50dcd68847&quot;,
                &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Should get a 500 when session questionIndex is mutated to non-integer&quot;,
                &quot;fullTitle&quot;: &quot;SessionUtils tests Test sessionQuestionIndex Should get a 500 when session questionIndex is mutated to non-integer&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = &#x27;LOL&#x27;;\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(500);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;48211a9e-3f6f-43b6-a979-21d26a29b245&quot;,
                &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/session-utils-spec.js&quot;,
            &quot;uuid&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/usr/src/test/session-utils-spec.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;Sessions not yet assigned a questionIndex should get one equal to -1&quot;,
                &quot;fullTitle&quot;: &quot;SessionUtils tests Test sessionQuestionIndex Sessions not yet assigned a questionIndex should get one equal to -1&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.req.session.questionIndex).to.equal(-1);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;9ccbca3a-695a-4882-a928-3b55d874bb7d&quot;,
                &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Sessions already assigned a questionIndex integer should keep it intact&quot;,
                &quot;fullTitle&quot;: &quot;SessionUtils tests Test sessionQuestionIndex Sessions already assigned a questionIndex integer should keep it intact&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = 1;\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.req.session.questionIndex).to.equal(1);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;a0f13c17-8de3-4d4f-93e6-4e50dcd68847&quot;,
                &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;Should get a 500 when session questionIndex is mutated to non-integer&quot;,
                &quot;fullTitle&quot;: &quot;SessionUtils tests Test sessionQuestionIndex Should get a 500 when session questionIndex is mutated to non-integer&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = &#x27;LOL&#x27;;\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(500);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;48211a9e-3f6f-43b6-a979-21d26a29b245&quot;,
                &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 3,
            &quot;totalPasses&quot;: 3,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 0,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;Test sessionQuestions&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;Should create a questions property on the req.session object that is an object array with right properties &quot;,
                &quot;fullTitle&quot;: &quot;SessionUtils tests Test sessionQuestions Should create a questions property on the req.session object that is an object array with right properties &quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\nreturn sesstionUtils.sessionQuestions(mock.req)\n  .then(result =&gt; {\n    expect(mock.req.session).to.have.property(&#x27;questions&#x27;).that.is.an(&#x27;array&#x27;);\n    mock.req.session.questions.forEach(item =&gt; {\n      expect(item).to.have.property(&#x27;label&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n    })\n  });&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;a8b8def9-1363-49e4-af13-85ebdd65c147&quot;,
                &quot;parentUUID&quot;: &quot;5b211887-048a-4ce9-a7fe-6a10579408f2&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/session-utils-spec.js&quot;,
            &quot;uuid&quot;: &quot;5b211887-048a-4ce9-a7fe-6a10579408f2&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/usr/src/test/session-utils-spec.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;Should create a questions property on the req.session object that is an object array with right properties &quot;,
                &quot;fullTitle&quot;: &quot;SessionUtils tests Test sessionQuestions Should create a questions property on the req.session object that is an object array with right properties &quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\nreturn sesstionUtils.sessionQuestions(mock.req)\n  .then(result =&gt; {\n    expect(mock.req.session).to.have.property(&#x27;questions&#x27;).that.is.an(&#x27;array&#x27;);\n    mock.req.session.questions.forEach(item =&gt; {\n      expect(item).to.have.property(&#x27;label&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n    })\n  });&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;a8b8def9-1363-49e4-af13-85ebdd65c147&quot;,
                &quot;parentUUID&quot;: &quot;5b211887-048a-4ce9-a7fe-6a10579408f2&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 1,
            &quot;totalPasses&quot;: 1,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 2,
            &quot;rootEmpty&quot;: false
          }
        ],
        &quot;tests&quot;: [],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/session-utils-spec.js&quot;,
        &quot;uuid&quot;: &quot;319c97d0-9a78-44c6-a804-5afa16a4a5e2&quot;,
        &quot;beforeHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;before all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;SessionUtils tests \&quot;before all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 11,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;mongoose.connect(`mongodb://mongo-store/test_get_questions`);\ndb = mongoose.connection;\ndb.on(&#x27;error&#x27;, console.error.bind(console, &#x27;connection error&#x27;));\ndb.once(&#x27;open&#x27;, function() {\n  createDatabase(db)\n    .then(result=&gt;{\n      done();\n    })\n    .catch(err=&gt;{\n      console.error(err);\n      done();\n      throw err;\n    });\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;843b7c68-490b-4c62-8521-1ce296d8868e&quot;,
            &quot;parentUUID&quot;: &quot;319c97d0-9a78-44c6-a804-5afa16a4a5e2&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;afterHooks&quot;: [
          {
            &quot;title&quot;: &quot;\&quot;after all\&quot; hook&quot;,
            &quot;fullTitle&quot;: &quot;SessionUtils tests \&quot;after all\&quot; hook&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;pass&quot;: false,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;db.dropDatabase(function(){\n  mongoose.connection.close(done);\n});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;b7f1a31f-a30d-41ba-8313-27c555c5e235&quot;,
            &quot;parentUUID&quot;: &quot;319c97d0-9a78-44c6-a804-5afa16a4a5e2&quot;,
            &quot;isHook&quot;: true,
            &quot;skipped&quot;: false
          }
        ],
        &quot;fullFile&quot;: &quot;/usr/src/test/session-utils-spec.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: true,
        &quot;hasAfterHooks&quot;: true,
        &quot;hasTests&quot;: false,
        &quot;hasSuites&quot;: true,
        &quot;totalTests&quot;: 0,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      }
    ],
    &quot;tests&quot;: [],
    &quot;pending&quot;: [],
    &quot;root&quot;: true,
    &quot;_timeout&quot;: 2000,
    &quot;uuid&quot;: &quot;8c2a6d7c-c75b-470e-bc15-5fb6e072d04d&quot;,
    &quot;beforeHooks&quot;: [],
    &quot;afterHooks&quot;: [],
    &quot;fullFile&quot;: &quot;&quot;,
    &quot;file&quot;: &quot;&quot;,
    &quot;passes&quot;: [],
    &quot;failures&quot;: [],
    &quot;skipped&quot;: [],
    &quot;hasBeforeHooks&quot;: false,
    &quot;hasAfterHooks&quot;: false,
    &quot;hasTests&quot;: false,
    &quot;hasSuites&quot;: true,
    &quot;totalTests&quot;: 0,
    &quot;totalPasses&quot;: 0,
    &quot;totalFailures&quot;: 0,
    &quot;totalPending&quot;: 0,
    &quot;totalSkipped&quot;: 0,
    &quot;hasPasses&quot;: false,
    &quot;hasFailures&quot;: false,
    &quot;hasPending&quot;: false,
    &quot;hasSkipped&quot;: false,
    &quot;duration&quot;: 0,
    &quot;rootEmpty&quot;: true
  },
  &quot;allTests&quot;: [
    {
      &quot;title&quot;: &quot;Requests without \&quot;answer\&quot; parameter should return 400 error&quot;,
      &quot;fullTitle&quot;: &quot;Test answerValidation Requests without \&quot;answer\&quot; parameter should return 400 error&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;128735e1-0bb6-468a-826b-673f3a6e5134&quot;,
      &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Requests with multiple \&quot;answer\&quot; parameters as array should return 400 error&quot;,
      &quot;fullTitle&quot;: &quot;Test answerValidation Requests with multiple \&quot;answer\&quot; parameters as array should return 400 error&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = [&#x27;bagels&#x27;, &#x27;donuts&#x27;];\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;cc1e7afe-4a09-4b61-afd0-6f03178cb865&quot;,
      &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Requests with invalid answers should return 400 error&quot;,
      &quot;fullTitle&quot;: &quot;Test answerValidation Requests with invalid answers should return 400 error&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = &#x27;goldfish&#x27;;\nmock.req.session.questions = questions;\nmock.req.session.questionIndex = 2;\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;fcdf93ed-6bf0-4f33-a9a6-2b7584cbf7fd&quot;,
      &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Requests with matched should continue&quot;,
      &quot;fullTitle&quot;: &quot;Test answerValidation Requests with matched should continue&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = &#x27;dogs&#x27;;\nmock.req.session.questions = questions;\nmock.req.session.questionIndex = 2;\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError).to.equal(null);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d8fb4c0c-c368-4843-a5f8-985e63b185af&quot;,
      &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should return an summary object array with right properties even though no req.session.questions&quot;,
      &quot;fullTitle&quot;: &quot;Test createSummary Should return an summary object array with right properties even though no req.session.questions&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 4,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\nreturn createSummary(mock.req)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;response&#x27;).that.is.an(&#x27;string&#x27;);\n    })\n  });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;b249cd77-c298-442a-a397-a76d90363057&quot;,
      &quot;parentUUID&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should return an summary object array with right properties given there is a req.session.questions&quot;,
      &quot;fullTitle&quot;: &quot;Test createSummary Should return an summary object array with right properties given there is a req.session.questions&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\n mock.req.session.questions = questions;\nreturn createSummary(mock.req)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;response&#x27;).that.is.a(&#x27;string&#x27;);\n    })\n  });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;bfc02a7f-c742-4af4-8bcd-608b8562e5b5&quot;,
      &quot;parentUUID&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;GET /api/v1/start&quot;,
      &quot;fullTitle&quot;: &quot;End 2 end tests GET /api/v1/start&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 45,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;medium&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;let cookie;\n    testRequest(app)\n      .get(&#x27;/api/v1/start&#x27;)\n      .then(res=&gt;{\n        // Test that the endpoint exists and responds with specified data\n        expect(res).to.have.property(&#x27;status&#x27;, 200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Coffee or tea?\&quot;);\n        expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n        cookie = res.header[&#x27;set-cookie&#x27;][0].split(&#x27;; &#x27;)[0];\n        return testRequest(app).get(&#x27;/api/v1/next?answer=tea&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      })\n      .then(res=&gt;{\n        // Test that the endpoint exists and responds with specified data\n        //console.log(res);\n        expect(res).to.have.property(&#x27;status&#x27;, 200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Donuts or bagels?\&quot;);\n        expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n        done();//return testRequest(app).get(&#x27;/api/v1/next?answer=bagels&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 200);\n      //   expect(res.body).to.be.an(&#x27;object&#x27;);\n      //   expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Cats or dogs?\&quot;);\n      //   expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n      //\n      //   return testRequest(app).get(&#x27;/api/v1/next?answer=dogs&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      // })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 302);\n      //   expect(res.header.location).to.equal(&#x27;/api/v1/summary&#x27;);\n      //\n      //   done();//return testRequest(app).get(&#x27;/api/v1/summary&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      // })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 200);\n      //   // res.body.forEach(item=&gt;{\n      //   //   expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      //   //   expect(item).to.have.property(&#x27;response&#x27;).that.is.a(&#x27;string&#x27;);\n      //   // })\n      //   done();\n      // })\n      .catch(err=&gt;{\n        console.error(err);\n        expect(err === undefined).to.equal(true);\n        done();\n      });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;87997fce-e902-426e-b9b0-2a6a11b4de96&quot;,
      &quot;parentUUID&quot;: &quot;7330f2a8-5773-4e1e-865b-436da2a34842&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should return an object array with right properties &quot;,
      &quot;fullTitle&quot;: &quot;Test getQuestions Should return an object array with right properties &quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;return getQuestions(db)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;label&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n    })\n  });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;f0c9cb9d-6cf7-432e-8d7b-2f2c6de05ff1&quot;,
      &quot;parentUUID&quot;: &quot;e8d28578-8f4e-4c55-9c8f-579278bae823&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Sessions with a question index of -1 should be sent to /api/v1/start&quot;,
      &quot;fullTitle&quot;: &quot;Test nextRedirects Sessions with a question index of -1 should be sent to /api/v1/start&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = -1;\nnextRedirects(mock.req, mock.res, mock.next);\nexpect(mock.redirectedPath).to.equal(&#x27;/api/v1/start&#x27;);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;73f1e697-25c2-4816-b4bf-b8bddf457dc4&quot;,
      &quot;parentUUID&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Sessions with a question index of &gt; total questions should be sent to /api/v1/summary&quot;,
      &quot;fullTitle&quot;: &quot;Test nextRedirects Sessions with a question index of &gt; total questions should be sent to /api/v1/summary&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = questions.length;\nmock.req.session.questions = questions;\nnextRedirects(mock.req, mock.res, mock.next);\nexpect(mock.redirectedPath).to.equal(&#x27;/api/v1/summary&#x27;);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;14e51446-8294-4ede-a654-365331087c46&quot;,
      &quot;parentUUID&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Sessions not yet assigned a questionIndex should get one equal to -1&quot;,
      &quot;fullTitle&quot;: &quot;Test sessionQuestionIndex Sessions not yet assigned a questionIndex should get one equal to -1&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.req.session.questionIndex).to.equal(-1);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;9ccbca3a-695a-4882-a928-3b55d874bb7d&quot;,
      &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Sessions already assigned a questionIndex integer should keep it intact&quot;,
      &quot;fullTitle&quot;: &quot;Test sessionQuestionIndex Sessions already assigned a questionIndex integer should keep it intact&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = 1;\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.req.session.questionIndex).to.equal(1);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a0f13c17-8de3-4d4f-93e6-4e50dcd68847&quot;,
      &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should get a 500 when session questionIndex is mutated to non-integer&quot;,
      &quot;fullTitle&quot;: &quot;Test sessionQuestionIndex Should get a 500 when session questionIndex is mutated to non-integer&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = &#x27;LOL&#x27;;\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(500);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;48211a9e-3f6f-43b6-a979-21d26a29b245&quot;,
      &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should create a questions property on the req.session object that is an object array with right properties &quot;,
      &quot;fullTitle&quot;: &quot;Test sessionQuestions Should create a questions property on the req.session object that is an object array with right properties &quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\nreturn sesstionUtils.sessionQuestions(mock.req)\n  .then(result =&gt; {\n    expect(mock.req.session).to.have.property(&#x27;questions&#x27;).that.is.an(&#x27;array&#x27;);\n    mock.req.session.questions.forEach(item =&gt; {\n      expect(item).to.have.property(&#x27;label&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n    })\n  });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a8b8def9-1363-49e4-af13-85ebdd65c147&quot;,
      &quot;parentUUID&quot;: &quot;5b211887-048a-4ce9-a7fe-6a10579408f2&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    }
  ],
  &quot;allPending&quot;: [],
  &quot;allPasses&quot;: [
    {
      &quot;title&quot;: &quot;Requests without \&quot;answer\&quot; parameter should return 400 error&quot;,
      &quot;fullTitle&quot;: &quot;Test answerValidation Requests without \&quot;answer\&quot; parameter should return 400 error&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;128735e1-0bb6-468a-826b-673f3a6e5134&quot;,
      &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Requests with multiple \&quot;answer\&quot; parameters as array should return 400 error&quot;,
      &quot;fullTitle&quot;: &quot;Test answerValidation Requests with multiple \&quot;answer\&quot; parameters as array should return 400 error&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = [&#x27;bagels&#x27;, &#x27;donuts&#x27;];\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;cc1e7afe-4a09-4b61-afd0-6f03178cb865&quot;,
      &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Requests with invalid answers should return 400 error&quot;,
      &quot;fullTitle&quot;: &quot;Test answerValidation Requests with invalid answers should return 400 error&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = &#x27;goldfish&#x27;;\nmock.req.session.questions = questions;\nmock.req.session.questionIndex = 2;\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(400);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;fcdf93ed-6bf0-4f33-a9a6-2b7584cbf7fd&quot;,
      &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Requests with matched should continue&quot;,
      &quot;fullTitle&quot;: &quot;Test answerValidation Requests with matched should continue&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.query.answer = &#x27;dogs&#x27;;\nmock.req.session.questions = questions;\nmock.req.session.questionIndex = 2;\nanswerValidation(mock.req, mock.res, mock.next);\nexpect(mock.testError).to.equal(null);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d8fb4c0c-c368-4843-a5f8-985e63b185af&quot;,
      &quot;parentUUID&quot;: &quot;7e76c556-3107-4486-ade5-30b59ab27729&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should return an summary object array with right properties even though no req.session.questions&quot;,
      &quot;fullTitle&quot;: &quot;Test createSummary Should return an summary object array with right properties even though no req.session.questions&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 4,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\nreturn createSummary(mock.req)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;response&#x27;).that.is.an(&#x27;string&#x27;);\n    })\n  });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;b249cd77-c298-442a-a397-a76d90363057&quot;,
      &quot;parentUUID&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should return an summary object array with right properties given there is a req.session.questions&quot;,
      &quot;fullTitle&quot;: &quot;Test createSummary Should return an summary object array with right properties given there is a req.session.questions&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\n mock.req.session.questions = questions;\nreturn createSummary(mock.req)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;response&#x27;).that.is.a(&#x27;string&#x27;);\n    })\n  });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;bfc02a7f-c742-4af4-8bcd-608b8562e5b5&quot;,
      &quot;parentUUID&quot;: &quot;1d2ae2ac-60d0-4c13-8417-6eccac6753ec&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;GET /api/v1/start&quot;,
      &quot;fullTitle&quot;: &quot;End 2 end tests GET /api/v1/start&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 45,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;medium&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;let cookie;\n    testRequest(app)\n      .get(&#x27;/api/v1/start&#x27;)\n      .then(res=&gt;{\n        // Test that the endpoint exists and responds with specified data\n        expect(res).to.have.property(&#x27;status&#x27;, 200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Coffee or tea?\&quot;);\n        expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n        cookie = res.header[&#x27;set-cookie&#x27;][0].split(&#x27;; &#x27;)[0];\n        return testRequest(app).get(&#x27;/api/v1/next?answer=tea&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      })\n      .then(res=&gt;{\n        // Test that the endpoint exists and responds with specified data\n        //console.log(res);\n        expect(res).to.have.property(&#x27;status&#x27;, 200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Donuts or bagels?\&quot;);\n        expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n        done();//return testRequest(app).get(&#x27;/api/v1/next?answer=bagels&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 200);\n      //   expect(res.body).to.be.an(&#x27;object&#x27;);\n      //   expect(res.body).to.have.property(&#x27;label&#x27;, \&quot;Cats or dogs?\&quot;);\n      //   expect(res.body).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n      //\n      //   return testRequest(app).get(&#x27;/api/v1/next?answer=dogs&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      // })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 302);\n      //   expect(res.header.location).to.equal(&#x27;/api/v1/summary&#x27;);\n      //\n      //   done();//return testRequest(app).get(&#x27;/api/v1/summary&#x27;).set(&#x27;Cookie&#x27;, [cookie]);\n      // })\n      // .then(res=&gt;{\n      //   // Test that the endpoint exists and responds with specified data\n      //   expect(res).to.have.property(&#x27;status&#x27;, 200);\n      //   // res.body.forEach(item=&gt;{\n      //   //   expect(item).to.have.property(&#x27;question&#x27;).that.is.a(&#x27;string&#x27;);\n      //   //   expect(item).to.have.property(&#x27;response&#x27;).that.is.a(&#x27;string&#x27;);\n      //   // })\n      //   done();\n      // })\n      .catch(err=&gt;{\n        console.error(err);\n        expect(err === undefined).to.equal(true);\n        done();\n      });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;87997fce-e902-426e-b9b0-2a6a11b4de96&quot;,
      &quot;parentUUID&quot;: &quot;7330f2a8-5773-4e1e-865b-436da2a34842&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should return an object array with right properties &quot;,
      &quot;fullTitle&quot;: &quot;Test getQuestions Should return an object array with right properties &quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;return getQuestions(db)\n  .then(result=&gt;{\n    expect(result).to.be.an(&#x27;array&#x27;);\n    result.forEach(item=&gt;{\n      expect(item).to.have.property(&#x27;label&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n    })\n  });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;f0c9cb9d-6cf7-432e-8d7b-2f2c6de05ff1&quot;,
      &quot;parentUUID&quot;: &quot;e8d28578-8f4e-4c55-9c8f-579278bae823&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Sessions with a question index of -1 should be sent to /api/v1/start&quot;,
      &quot;fullTitle&quot;: &quot;Test nextRedirects Sessions with a question index of -1 should be sent to /api/v1/start&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = -1;\nnextRedirects(mock.req, mock.res, mock.next);\nexpect(mock.redirectedPath).to.equal(&#x27;/api/v1/start&#x27;);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;73f1e697-25c2-4816-b4bf-b8bddf457dc4&quot;,
      &quot;parentUUID&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Sessions with a question index of &gt; total questions should be sent to /api/v1/summary&quot;,
      &quot;fullTitle&quot;: &quot;Test nextRedirects Sessions with a question index of &gt; total questions should be sent to /api/v1/summary&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = questions.length;\nmock.req.session.questions = questions;\nnextRedirects(mock.req, mock.res, mock.next);\nexpect(mock.redirectedPath).to.equal(&#x27;/api/v1/summary&#x27;);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;14e51446-8294-4ede-a654-365331087c46&quot;,
      &quot;parentUUID&quot;: &quot;e6a7f673-3faa-48d2-b011-3905abd00f0a&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Sessions not yet assigned a questionIndex should get one equal to -1&quot;,
      &quot;fullTitle&quot;: &quot;Test sessionQuestionIndex Sessions not yet assigned a questionIndex should get one equal to -1&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.req.session.questionIndex).to.equal(-1);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;9ccbca3a-695a-4882-a928-3b55d874bb7d&quot;,
      &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Sessions already assigned a questionIndex integer should keep it intact&quot;,
      &quot;fullTitle&quot;: &quot;Test sessionQuestionIndex Sessions already assigned a questionIndex integer should keep it intact&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = 1;\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.req.session.questionIndex).to.equal(1);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a0f13c17-8de3-4d4f-93e6-4e50dcd68847&quot;,
      &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should get a 500 when session questionIndex is mutated to non-integer&quot;,
      &quot;fullTitle&quot;: &quot;Test sessionQuestionIndex Should get a 500 when session questionIndex is mutated to non-integer&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.session.questionIndex = &#x27;LOL&#x27;;\nsesstionUtils.sessionQuestionIndex(mock.req, mock.res, mock.next);\nexpect(mock.testError.status).to.equal(500);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;48211a9e-3f6f-43b6-a979-21d26a29b245&quot;,
      &quot;parentUUID&quot;: &quot;24c62354-ec13-449a-83d8-a72c93bded12&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;Should create a questions property on the req.session object that is an object array with right properties &quot;,
      &quot;fullTitle&quot;: &quot;Test sessionQuestions Should create a questions property on the req.session object that is an object array with right properties &quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;const mock = new MiddlewareMock();\nmock.req.app.set(&#x27;db&#x27;, db);\nreturn sesstionUtils.sessionQuestions(mock.req)\n  .then(result =&gt; {\n    expect(mock.req.session).to.have.property(&#x27;questions&#x27;).that.is.an(&#x27;array&#x27;);\n    mock.req.session.questions.forEach(item =&gt; {\n      expect(item).to.have.property(&#x27;label&#x27;).that.is.a(&#x27;string&#x27;);\n      expect(item).to.have.property(&#x27;answers&#x27;).that.is.an(&#x27;array&#x27;);\n    })\n  });&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a8b8def9-1363-49e4-af13-85ebdd65c147&quot;,
      &quot;parentUUID&quot;: &quot;5b211887-048a-4ce9-a7fe-6a10579408f2&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    }
  ],
  &quot;allFailures&quot;: [],
  &quot;copyrightYear&quot;: 2018
}" data-config="{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;src&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;dev&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveJson&quot;:true,&quot;jsonFile&quot;:&quot;/usr/src/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/usr/src/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>